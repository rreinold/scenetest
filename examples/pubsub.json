{
    "name": "Let's do producers and consumers with mqtt",
    "scenarios": [ ["producer", 5], ["consumer", 5] ],
    "sequencing": "Parallel",
    "producer": {
        "name": "Spewing out MQTT",
        "steps": [
            ["setUser", "foo@bar.com"],
            ["sync", "all subscribed", 5],
            ["repeat", 50, 
                [
                    ["publish", "/clearblade/test/spewer", "This is the spew", 1]
                ]
            ]
        ]
    },
    "consumer": {
        "name": "Cleaning up the spew",
        "steps": [
            ["setUser", "bar@bar.com"],
            ["subscribe", "/clearblade/test/spewer", 1],
            ["sync", "all subscribed", 5],
            ["repeat", 50, 
                [
                    ["waitMessage", "/clearblade/test/spewer", 300]
                ]
            ]
        ]
    }
}
