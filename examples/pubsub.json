{
    "name": "Let's do producers and consumers with mqtt",
    "scenarios": [ ["producer", 3], ["consumer", 2] ],
    "sequencing": "Parallel",
    "producer": {
        "name": "Spewing out MQTT",
        "steps": [
            ["sleep", 3000],
            ["setUser", "foo@bar.com"],
            ["print", "producer initialized"],
            ["repeat", 100000, 
                [
                    ["publish", "/clearblade/test/spewer", "This is the spew", 0]
                ]
            ]
        ]
    },
    "consumer": {
        "name": "Cleaning up the spew",
        "steps": [
            ["setUser", "bar@bar.com"],
            ["print", "consumer initialized"],
            ["subscribe", "/clearblade/test/spewer", 0],
            ["repeat", 150000, 
                [
                    ["waitMessage", "/clearblade/test/spewer", 300]
                ]
            ]
        ]
    }
}
