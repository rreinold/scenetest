{
    "name": "Mess with collections",

    "scenarios": [
        ["Create Collections", 1],
        ["Delete Collections", 1],
        ["Create/Delete", 1],
        ["Get All Collections", 1],
        ["Create Collection Trigger", 1],
        ["Delete Collection Trigger", 1]
     ],

    "sequencing": "Parallel",

    "globals": {
        "iterations": 100
    },

    "Create Collections": {
        "name": "Create Collections",
        "steps": [
            ["setUser", "foo@bar.com"],
            ["sync", "Wait For Trigger Subscription", 6],
            ["for", [["set", "i", 0], ["<", "@i", "@iterations"], ["set", "i", ["+", "@i", 1]]], [
                ["createCollection", ["concat", "Super Duper Collection", "@i"]],
                ["sync", "created collection", 2] ]
            ]
        ]
    },

    "Delete Collections": {
        "name": "Delete Collections",
        "steps": [
            ["setUser", "bar@bar.com"],
            ["sync", "Wait For Trigger Subscription", 6],
            ["for", [["set", "i", 0], ["<", "@i", "@iterations"], ["set", "i", ["+", "@i", 1]]], [
                ["sync", "created collection", 2],
                ["deleteCollection", ["concat", "Super Duper Collection", "@i"] ] ]
            ]
        ]
    },


    "Create/Delete": {
        "name": "Create/Delete",
        "steps": [
            ["setUser", "bar@bar.com"],
            ["sync", "Wait For Trigger Subscription", 6],
            ["repeat", "@iterations", [
                ["createCollection", "futz"],
                ["deleteCollection", "futz"] ]
            ]
        ]
    },

    "Get All Collections": {
        "name": "Get All The Collections",
        "steps": [
            ["setUser", "swm@clearblade.com"],
            ["sync", "Wait For Trigger Subscription", 6],
            ["repeat", ["*", "@iterations", 3], [
                ["allCollections"] ]
            ]
        ]
    },

    "Create Collection Trigger": {
        "name": "Create Collection Trigger",
        "steps": [
            ["setUser", "swm@clearblade.com"],
            ["subscribeTriggers"],
            ["sync", "Wait For Trigger Subscription", 6],
            ["repeat", ["*", "@iterations", 2], [
                ["waitTrigger", "Data", "CollectionCreated", 60] ]
            ]
        ]
    },

    "Delete Collection Trigger": {
        "name": "Delete Collection Trigger",
        "steps": [
            ["setUser", "swm@clearblade.com"],
            ["subscribeTriggers"],
            ["sync", "Wait For Trigger Subscription", 6],
            ["repeat", ["*", "@iterations", 2], [
                ["waitTrigger", "Data", "CollectionDeleted", 60] ]
            ]
        ]
    }
}
